<!doctype html><html lang=zh dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="理解 GOPATH # 介绍 # 本文将带领你了解什么是 GOPATH，它是如何工作的，以及如何设置它。这是设置 Go 开发环境以及理解 Go 如何查找、安装和构建源文件的关键步骤。在本文中，我们将使用 GOPATH 来指代我们将要讨论的文件夹结构的概念。我们将使用 $GOPATH 来指代 Go 用来查找文件夹结构的环境变量。
Go 工作区 是 Go 管理源码文件、编译的二进制文件和用于后续更快编译的缓存对象。虽然可能有多个空间，但只有一个 Go 工作区是典型的，也是被建议的使用方式。GOPATH 充当工作区的根文件夹。
设置 $GOPATH 环境变量 # $GOPATH 环境变量列出了 Go 用来寻找 Go 工作区的地方。
默认情况下，Go 假设 GOPATH 位于 $HOME/go，其中 $HOME 是电脑上上我们帐户的根目录。我们可以通过设置 $GOPATH 环境变量来修改它。为了进一步的研究，请参考在 Linux 中阅读和设置环境变量的教程。
想要了解更多关于设置 $GOPATH 变量的信息，可以参考 Go 文档。
此外，本系列教程 简单介绍了安装 Go 和设置 Go 开发环境的方法。
$GOPATH 不是 $GOROOT # $GOROOT 是 Go 的代码、编译器和工具所在的地方ーー这不是我们的源代码。$GOROOT 通常类似于 /usr/local/go。我们的 $GOPATH 通常类似于 $HOME/go。"><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="理解 GOPATH # 介绍 # 本文将带领你了解什么是 GOPATH，它是如何工作的，以及如何设置它。这是设置 Go 开发环境以及理解 Go 如何查找、安装和构建源文件的关键步骤。在本文中，我们将使用 GOPATH 来指代我们将要讨论的文件夹结构的概念。我们将使用 $GOPATH 来指代 Go 用来查找文件夹结构的环境变量。
Go 工作区 是 Go 管理源码文件、编译的二进制文件和用于后续更快编译的缓存对象。虽然可能有多个空间，但只有一个 Go 工作区是典型的，也是被建议的使用方式。GOPATH 充当工作区的根文件夹。
设置 $GOPATH 环境变量 # $GOPATH 环境变量列出了 Go 用来寻找 Go 工作区的地方。
默认情况下，Go 假设 GOPATH 位于 $HOME/go，其中 $HOME 是电脑上上我们帐户的根目录。我们可以通过设置 $GOPATH 环境变量来修改它。为了进一步的研究，请参考在 Linux 中阅读和设置环境变量的教程。
想要了解更多关于设置 $GOPATH 变量的信息，可以参考 Go 文档。
此外，本系列教程 简单介绍了安装 Go 和设置 Go 开发环境的方法。
$GOPATH 不是 $GOROOT # $GOROOT 是 Go 的代码、编译器和工具所在的地方ーー这不是我们的源代码。$GOROOT 通常类似于 /usr/local/go。我们的 $GOPATH 通常类似于 $HOME/go。"><meta property="og:type" content="article"><meta property="og:url" content="https://gocn.github.io/How-To-Code-in-Go/docs/05-Understanding_the_GOPATH/"><meta property="article:section" content="docs"><title>05 Understanding the Gopath | How To Code in Go</title><link rel=manifest href=/How-To-Code-in-Go/manifest.json><link rel=icon href=/How-To-Code-in-Go/favicon.png type=image/x-icon><link rel=stylesheet href=/How-To-Code-in-Go/book.min.82c5dbd23447cee0b4c2aa3ed08ce0961faa40e1fa370eee4f8c9f02e0d46b5f.css integrity="sha256-gsXb0jRHzuC0wqo+0Izglh+qQOH6Nw7uT4yfAuDUa18=" crossorigin=anonymous><script defer src=/How-To-Code-in-Go/flexsearch.min.js></script>
<script defer src=/How-To-Code-in-Go/zh.search.min.2ccdafc211784f64f63652981924d269b4ff643413814bfc0d5743573b76ade7.js integrity="sha256-LM2vwhF4T2T2NlKYGSTSabT/ZDQTgUv8DVdDVzt2rec=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/How-To-Code-in-Go/><span>How To Code in Go</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=搜索 aria-label=搜索 maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><p><strong>开始学习</strong></p><ul><li><a href=/How-To-Code-in-Go/docs/01-How_To_Install_Go_and_Set_Up_a_Local-Programming_Environment_on_Ubuntu_18.04_DigitalOcean/>1. 如何在 Ubuntu 18.04 上安装 Go 和设置本地编程环境</a></li><li><a href=/How-To-Code-in-Go/docs/02-How_To_Install_Go_and_Set_Up_a_Local_Programming_Environment_on_macOS_DigitalOcean/>2. 如何在 macOS 上安装 Go 和设置本地编程环境</a></li><li><a href=/How-To-Code-in-Go/docs/03-How_To_Install_Go_and_Set_Up_a_Local_Programming_Environment_on_Windows_10_DigitalOcean/>3. 如何在 Windows 10 上安装 Go 和设置本地编程环境</a></li><li><a href=/How-To-Code-in-Go/docs/04-How_To_Write_Your_First_Program_in_Go_DigitalOcean/>4. 如何用 Go 编写你的第一个程序</a></li><li><a href=/How-To-Code-in-Go/docs/05-Understanding_the_GOPATH/ class=active>5. 理解 GOPATH</a></li><li><a href=/How-To-Code-in-Go/docs/06-How_To_Write_Comments_in_Go/>6. 如何在 Go 中写注释</a></li><li><a href=/How-To-Code-in-Go/docs/07-Understanding_Data_Types_in_Go/>7. 理解 Go 的数据类型</a></li><li><a href=/How-To-Code-in-Go/docs/08-An_Introduction_to_Working_with_Strings_in_Go/>8. Go 中处理字符串的介绍</a></li><li><a href=/How-To-Code-in-Go/docs/09-How_To_Format_Strings_in_Go/>9. 如何在 Go 中格式化字符串</a></li><li><a href=/How-To-Code-in-Go/docs/10-An_Introduction_to_the_Strings_Package_in_Go/>10. 介绍 Go 中的 Strings 包</a></li><li><a href=/How-To-Code-in-Go/docs/11-How_To_Use_Variables_and_Constants_in_Go/>11. 如何在 Go 中使用变量和常量</a></li><li><a href=/How-To-Code-in-Go/docs/12-How_To_Convert_Data_Types_in_Go/>12. 如何在 Go 中转换数据类型</a></li><li><a href=/How-To-Code-in-Go/docs/13-How_To_Do_Math_in_Go_with_Operators/>13. 如何用运算符在 Go 中做数学计算</a></li><li><a href=/How-To-Code-in-Go/docs/14-Understanding_Boolean_Logic_in_Go/>14. 理解 Go 中的布尔逻辑</a></li><li><a href=/How-To-Code-in-Go/docs/15-Understanding_Maps_in_Go/>15. 理解 Go 中的 Map</a></li><li><a href=/How-To-Code-in-Go/docs/16-Understanding_Arrays_and_Slices_in_Go/>16. 理解 Go 中的数组和切片</a></li><li><a href=/How-To-Code-in-Go/docs/17-Handling_Errors_in_Go_DigitalOcean/>17. 在 Go 中处理错误</a></li><li><a href=/How-To-Code-in-Go/docs/18-Creating_Custom_Errors_in_Go_DigitalOcean/>18. 在 Go 中创建自定义错误</a></li><li><a href=/How-To-Code-in-Go/docs/19-Handling_Panics_in_Go-_DigitalOcean/>19 在 Go 中处理恐慌</a></li><li><a href=/How-To-Code-in-Go/docs/20-Importing_Packages_in_Go_DigitalOcean/>20. 在 Go 中导入包</a></li><li><a href=/How-To-Code-in-Go/docs/21-How_To_Write_Packages_in_Go/>21. 如何在 Go 中编写包</a></li><li><a href=/How-To-Code-in-Go/docs/22-Understanding_Package_Visibility_in_Go/>22. 理解 Go 中包的可见性</a></li><li><a href=/How-To-Code-in-Go/docs/23-How_To_Write_Conditional_Statements_in_Go/>23. 如何在 Go 中编写条件语句</a></li><li><a href=/How-To-Code-in-Go/docs/24-How_To_Write_Switch_Statements_in_Go/>24. 如何在 Go 中编写 Switch 语句</a></li><li><a href=/How-To-Code-in-Go/docs/25-How_To_Construct_For_Loops_in_Go/>25. 如何在 Go 中构造 for 循环</a></li><li><a href=/How-To-Code-in-Go/docs/26-Using_Break_and_Continue_Statements_When_Working_with_Loops_in_Go/>26. 在循环中使用 Break 和 Continue</a></li><li><a href=/How-To-Code-in-Go/docs/27-How_To_Define_and_Call_Functions_in_Go/>27. 如何在 Go 中定义并调用函数</a></li><li><a href=/How-To-Code-in-Go/docs/28-How_To_Use_Variadic_Functions_in_Go/>28. 如何在 Go 中使用可变参数函数</a></li><li><a href=/How-To-Code-in-Go/docs/29-Understanding_defer_in_Go/>29. 理解 Go 中的 defer</a></li><li><a href=/How-To-Code-in-Go/docs/30-Understanding_init_in_Go/>30. 理解 Go 中的 init</a></li><li><a href=/How-To-Code-in-Go/docs/31-Customizing_Go_Binaries_with_Build_Tags/>31. 用构建标签定制 Go 二进制文件</a></li><li><a href=/How-To-Code-in-Go/docs/32-Understanding_Pointers_in_Go/>32. 理解 Go 中的指针</a></li><li><a href=/How-To-Code-in-Go/docs/33-Defining_Structs_in_Go/>33. 在 Go 中定义结构体</a></li><li><a href=/How-To-Code-in-Go/docs/34-Defining_Methods_in_Go/>34. 在 Go 中定义方法</a></li><li><a href=/How-To-Code-in-Go/docs/35-How_To_Build_and_Install_Go_Programs/>35. 如何构建和安装 Go 程序</a></li><li><a href=/How-To-Code-in-Go/docs/36-How_To_Use_Struct_Tags_in_Go/>36. 如何在 Go 中使用结构体标签</a></li><li><a href=/How-To-Code-in-Go/docs/37-How_To_Use_Interfaces_in_Go/>37. 如何在 Go 使用 interface</a></li><li><a href=/How-To-Code-in-Go/docs/38-Building_Go_Applications_for_Different_Operating_Systems_and_Architectures/>38. 在不同的操作系统和架构编译 Go 应用</a></li><li><a href=/How-To-Code-in-Go/docs/39-Using_ldflags_to_Set_Version_Information_for_Go_Applications/>39. 用 ldflags 设置 Go 应用程序的版本信息</a></li><li><a href=/How-To-Code-in-Go/docs/40-How_To_Use_the_Flag_Package_in_Go/>40. 在 Go 里面如何使用 Flag 包</a></li><li><a href=/How-To-Code-in-Go/docs/41-How_to_Use_Go_Modules/>41. 如何使用 Go 模块</a></li><li><a href=/How-To-Code-in-Go/docs/42-How_to_Distribute_Go_Modules/>42. 如何分发 Go 模块</a></li><li><a href=/How-To-Code-in-Go/docs/43-How_to_Use_a_Private_Go_Module_in_Your_Own_Project/>43. 如何在自己的项目中使用私有的Go模块</a></li></ul></li><li><p><strong>附录：资源</strong></p></li><li><p><a href=https://github.com/gocn/How-To-Code-in-Go><strong>Fork on Github</strong></a></p></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/How-To-Code-in-Go/svg/menu.svg class=book-icon alt=Menu></label>
<strong>05 Understanding the Gopath</strong>
<label for=toc-control><img src=/How-To-Code-in-Go/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#介绍>介绍</a></li><li><a href=#设置-gopath-环境变量>设置 <code>$GOPATH</code> 环境变量</a></li><li><a href=#gopath-不是-goroot><code>$GOPATH</code> 不是 <code>$GOROOT</code></a></li><li><a href=#go-工作区剖析>Go 工作区剖析</a></li><li><a href=#什么是包>什么是包</a></li><li><a href=#结论>结论</a></li></ul></nav></aside></header><article class=markdown><h1 id=理解-gopath>理解 GOPATH
<a class=anchor href=#%e7%90%86%e8%a7%a3-gopath>#</a></h1><h2 id=介绍>介绍
<a class=anchor href=#%e4%bb%8b%e7%bb%8d>#</a></h2><p>本文将带领你了解什么是 <code>GOPATH</code>，它是如何工作的，以及如何设置它。这是设置 Go 开发环境以及理解 Go 如何查找、安装和构建源文件的关键步骤。在本文中，我们将使用 <code>GOPATH</code> 来指代我们将要讨论的文件夹结构的概念。我们将使用 <code>$GOPATH</code> 来指代 Go 用来查找文件夹结构的环境变量。</p><p><a href=https://golang.org/doc/code.html#Workspaces>Go 工作区</a> 是 Go 管理源码文件、编译的二进制文件和用于后续更快编译的缓存对象。虽然可能有多个空间，但只有一个 Go 工作区是典型的，也是被建议的使用方式。<code>GOPATH</code> 充当工作区的根文件夹。</p><h2 id=设置-gopath-环境变量>设置 <code>$GOPATH</code> 环境变量
<a class=anchor href=#%e8%ae%be%e7%bd%ae-gopath-%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f>#</a></h2><p><code>$GOPATH</code> 环境变量列出了 Go 用来寻找 Go 工作区的地方。</p><p>默认情况下，Go 假设 <code>GOPATH</code> 位于 <code>$HOME/go</code>，其中 <code>$HOME</code> 是电脑上上我们帐户的根目录。我们可以通过设置 <code>$GOPATH</code> 环境变量来修改它。为了进一步的研究，请参考<a href=https://www.digitalocean.com/community/tutorials/how-to-read-and-set-environmental-and-shell-variables-on-a-linux-vps>在 Linux 中阅读和设置环境变量</a>的教程。</p><p>想要了解更多关于设置 <code>$GOPATH</code> 变量的信息，可以参考 Go <a href=https://golang.org/doc/code.html#Workspaces>文档</a>。</p><p>此外，<a href=/How-To-Code-in-Go/docs/01-How_To_Install_Go_and_Set_Up_a_Local-Programming_Environment_on_Ubuntu_18.04_DigitalOcean/>本系列教程</a> 简单介绍了安装 Go 和设置 Go 开发环境的方法。</p><h2 id=gopath-不是-goroot><code>$GOPATH</code> 不是 <code>$GOROOT</code>
<a class=anchor href=#gopath-%e4%b8%8d%e6%98%af-goroot>#</a></h2><p><code>$GOROOT</code> 是 Go 的代码、编译器和工具所在的地方ーー这<strong>不是</strong>我们的源代码。<code>$GOROOT</code> 通常类似于 <code>/usr/local/go</code>。我们的 <code>$GOPATH</code> 通常类似于 <code>$HOME/go</code>。</p><p>虽然我们不再需要专门设置 <code>$GOROOT</code> 变量，但它仍然在旧材料中被引用。</p><p>现在，让我们讨论一下 Go Workspace 的结构。</p><h2 id=go-工作区剖析>Go 工作区剖析
<a class=anchor href=#go-%e5%b7%a5%e4%bd%9c%e5%8c%ba%e5%89%96%e6%9e%90>#</a></h2><p>在一个 Go Workspace 或者 <code>GOPATH</code> 中，有三个目录: <code>bin</code>、 <code>pkg</code> 和 <code>src</code>。这些目录中的每一个对于 Go 工具链都有特殊的意义。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>.
</span></span><span style=display:flex><span>├── bin
</span></span><span style=display:flex><span>├── pkg
</span></span><span style=display:flex><span>└── src
</span></span><span style=display:flex><span>  └── github.com/foo/bar
</span></span><span style=display:flex><span>    └── bar.go
</span></span></code></pre></div><p>让我们来看看每个目录。</p><p><code>$GOPATH/bin</code> 目录是 Go 放置 <code>go install</code> 编译的二进制文件的地方。我们的操作系统使用 <code>$PATH</code> 环境变量在没有完整路径的情况下找到二进制应用程序并执行。建议将此目录添加到全局 <code>$PATH</code> 变量中。</p><p>例如，如果我们不在 <code>$PATH</code> 中添加 <code>$GOPATH/bin</code> 来执行一个程序，我们需要运行:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>$GOPATH/bin/myapp
</span></span></code></pre></div><p>当 <code>$GOPATH/bin</code> 被添加到 <code>$PATH</code> 时，我们可以像这样进行同样的调用:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>$ myapp
</span></span></code></pre></div><p><code>$GOPATH/pkg</code> 目录是 Go 存储预编译目标文件的地方，以加速程序的后续编译。通常，大多数开发人员不需要访问这个目录。如果遇到编译问题，可以安全地删除该目录，然后 Go 将重新生成该目录。</p><p>在 <code>src</code> 目录是我们放置所有的 <code>.go</code> 文件，或源代码的地方。这不应与 Go 工具使用的源代码混淆，后者位于 <code>$GOROOT</code> 中。在编写 Go 应用程序、包和库时，我们将把这些文件放在 <code>$GOPATH/src/path/to/code</code> 下。</p><h2 id=什么是包>什么是包
<a class=anchor href=#%e4%bb%80%e4%b9%88%e6%98%af%e5%8c%85>#</a></h2><p>Go 代码是以包的形式组织的。包表示磁盘上单个目录中的所有文件。一个目录只能包含来自同一包的某些文件。包与所有用户编写的 Go 源文件一起存储在 <code>$GOPATH/src</code> 目录下。我们可以通过导入不同的软件包来理解软件包解析。</p><p>如果我们的代码是 <code>$GOPATH/src/blue/red</code>，那么它的包名应该是 <code>red</code>。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;blue/red&#34;</span>
</span></span></code></pre></div><p><code>red</code> 包的导入声明如下:</p><p>存储在源代码仓库中的软件包，如 GitHub 和 BitBucket，将仓库的完整位置作为导入路径的一部分。</p><p>例如，我们可以使用下面的导入路径来导入 <a href=https://github.com/gobuffalo/buffalo>https://github.com/gobuffalo/buffalo</a> 的源代码:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;github.com/gobuffalo/buffalo&#34;</span>
</span></span></code></pre></div><p>因此，这个源代码应该位于磁盘上的下列位置:</p><pre tabindex=0><code class=language-test data-lang=test>$GOPATH/src/github.com/gobuffalo/buffalo
</code></pre><h2 id=结论>结论
<a class=anchor href=#%e7%bb%93%e8%ae%ba>#</a></h2><p>在这篇文章中，我们讨论了 <code>GOPATH</code> 作为一个文件夹的集合，Go 期望我们的源代码保存在里面，以及这些文件夹是什么，它们包含什么。我们讨论了如何通过设置 <code>$GOPATH</code> 环境变量，将默认的 <code>$HOME/go</code> 位置改为用户选择的位置。最后，我们讨论了 Go 如何在该文件夹结构中搜索包。</p><p>在 Go 1.11 中引入的 <a href=https://github.com/golang/Go/wiki/Modules>Go Modules</a>旨在取代 Go Workspaces 和 <code>GOPATH</code>。虽然建议开始使用模块，但是有些环境(如公司环境)，可能还没有准备好使用模块。</p><p><code>GOPATH</code> 是 Go 设置中比较棘手的一个方面，但是一旦设置好了，我们通常会忘记它。</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#介绍>介绍</a></li><li><a href=#设置-gopath-环境变量>设置 <code>$GOPATH</code> 环境变量</a></li><li><a href=#gopath-不是-goroot><code>$GOPATH</code> 不是 <code>$GOROOT</code></a></li><li><a href=#go-工作区剖析>Go 工作区剖析</a></li><li><a href=#什么是包>什么是包</a></li><li><a href=#结论>结论</a></li></ul></nav></div></aside></main></body></html>