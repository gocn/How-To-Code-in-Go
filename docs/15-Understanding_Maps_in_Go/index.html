<!doctype html><html lang=zh dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="理解 Go 中的 Map # 大多数现代编程语言都有_字典_或_哈希_类型的概念。这些类型通常用于以成对的方式存储数据，其中的key映射到value。
在 Go 中，map 数据类型就是大多数程序员认为的字典类型。它将键映射到值，形成键值对，是 Go 中存储数据的一种有效方式。一个 map 的构造是通过使用关键字 map，然后是方括号中的键数据类型 [ ]，接着是值数据类型。然后将键值对放在大括号的两侧 { } 中。
map[key]value{} 通常在 Go 中使用 map 来保存相关数据，例如 ID 中包含的信息。一个有数据的 map 看起来像这样。
map[string]string{&#34;name&#34;: &#34;Sammy&#34;, &#34;animal&#34;: &#34;shark&#34;, &#34;color&#34;: &#34;blue&#34;, &#34;location&#34;: &#34;ocean&#34;} 除了大括号外，整个 map 中还有冒号连接键值对。冒号左边的字是键。键值可以是 Go 中可比较的类型，如 strings、ints 等。
示例 map 中的键是：
&#34;name&#34; &#34;animal&#34; &#34;color&#34; &#34;location&#34; 冒号右边的字是值，值可以是任何数据类型。示例 map 中的值是：
&#34;Sammy&#34; &#34;shark&#34; &#34;blue&#34; &#34;ocean&#34; 像其他数据类型一样，你可以将 map 存储在一个变量内，并将其打印出来：
sammy := map[string]string{&#34;name&#34;: &#34;Sammy&#34;, &#34;animal&#34;: &#34;shark&#34;, &#34;color&#34;: &#34;blue&#34;, &#34;location&#34;: &#34;ocean&#34;} fmt."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="理解 Go 中的 Map # 大多数现代编程语言都有_字典_或_哈希_类型的概念。这些类型通常用于以成对的方式存储数据，其中的key映射到value。
在 Go 中，map 数据类型就是大多数程序员认为的字典类型。它将键映射到值，形成键值对，是 Go 中存储数据的一种有效方式。一个 map 的构造是通过使用关键字 map，然后是方括号中的键数据类型 [ ]，接着是值数据类型。然后将键值对放在大括号的两侧 { } 中。
map[key]value{} 通常在 Go 中使用 map 来保存相关数据，例如 ID 中包含的信息。一个有数据的 map 看起来像这样。
map[string]string{&#34;name&#34;: &#34;Sammy&#34;, &#34;animal&#34;: &#34;shark&#34;, &#34;color&#34;: &#34;blue&#34;, &#34;location&#34;: &#34;ocean&#34;} 除了大括号外，整个 map 中还有冒号连接键值对。冒号左边的字是键。键值可以是 Go 中可比较的类型，如 strings、ints 等。
示例 map 中的键是：
&#34;name&#34; &#34;animal&#34; &#34;color&#34; &#34;location&#34; 冒号右边的字是值，值可以是任何数据类型。示例 map 中的值是：
&#34;Sammy&#34; &#34;shark&#34; &#34;blue&#34; &#34;ocean&#34; 像其他数据类型一样，你可以将 map 存储在一个变量内，并将其打印出来：
sammy := map[string]string{&#34;name&#34;: &#34;Sammy&#34;, &#34;animal&#34;: &#34;shark&#34;, &#34;color&#34;: &#34;blue&#34;, &#34;location&#34;: &#34;ocean&#34;} fmt."><meta property="og:type" content="article"><meta property="og:url" content="https://gocn.github.io/How-To-Code-in-Go/docs/15-Understanding_Maps_in_Go/"><meta property="article:section" content="docs"><title>15 Understanding Maps in Go | How To Code in Go</title><link rel=manifest href=/How-To-Code-in-Go/manifest.json><link rel=icon href=/How-To-Code-in-Go/favicon.png type=image/x-icon><link rel=stylesheet href=/How-To-Code-in-Go/book.min.82c5dbd23447cee0b4c2aa3ed08ce0961faa40e1fa370eee4f8c9f02e0d46b5f.css integrity="sha256-gsXb0jRHzuC0wqo+0Izglh+qQOH6Nw7uT4yfAuDUa18=" crossorigin=anonymous><script defer src=/How-To-Code-in-Go/flexsearch.min.js></script>
<script defer src=/How-To-Code-in-Go/zh.search.min.2ccdafc211784f64f63652981924d269b4ff643413814bfc0d5743573b76ade7.js integrity="sha256-LM2vwhF4T2T2NlKYGSTSabT/ZDQTgUv8DVdDVzt2rec=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/How-To-Code-in-Go/><span>How To Code in Go</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=搜索 aria-label=搜索 maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><p><strong>开始学习</strong></p><ul><li><a href=/How-To-Code-in-Go/docs/01-How_To_Install_Go_and_Set_Up_a_Local-Programming_Environment_on_Ubuntu_18.04_DigitalOcean/>1. 如何在 Ubuntu 18.04 上安装 Go 和设置本地编程环境</a></li><li><a href=/How-To-Code-in-Go/docs/02-How_To_Install_Go_and_Set_Up_a_Local_Programming_Environment_on_macOS_DigitalOcean/>2. 如何在 macOS 上安装 Go 和设置本地编程环境</a></li><li><a href=/How-To-Code-in-Go/docs/03-How_To_Install_Go_and_Set_Up_a_Local_Programming_Environment_on_Windows_10_DigitalOcean/>3. 如何在 Windows 10 上安装 Go 和设置本地编程环境</a></li><li><a href=/How-To-Code-in-Go/docs/04-How_To_Write_Your_First_Program_in_Go_DigitalOcean/>4. 如何用 Go 编写你的第一个程序</a></li><li><a href=/How-To-Code-in-Go/docs/05-Understanding_the_GOPATH/>5. 理解 GOPATH</a></li><li><a href=/How-To-Code-in-Go/docs/06-How_To_Write_Comments_in_Go/>6. 如何在 Go 中写注释</a></li><li><a href=/How-To-Code-in-Go/docs/07-Understanding_Data_Types_in_Go/>7. 理解 Go 的数据类型</a></li><li><a href=/How-To-Code-in-Go/docs/08-An_Introduction_to_Working_with_Strings_in_Go/>8. Go 中处理字符串的介绍</a></li><li><a href=/How-To-Code-in-Go/docs/09-How_To_Format_Strings_in_Go/>9. 如何在 Go 中格式化字符串</a></li><li><a href=/How-To-Code-in-Go/docs/10-An_Introduction_to_the_Strings_Package_in_Go/>10. 介绍 Go 中的 Strings 包</a></li><li><a href=/How-To-Code-in-Go/docs/11-How_To_Use_Variables_and_Constants_in_Go/>11. 如何在 Go 中使用变量和常量</a></li><li><a href=/How-To-Code-in-Go/docs/12-How_To_Convert_Data_Types_in_Go/>12. 如何在 Go 中转换数据类型</a></li><li><a href=/How-To-Code-in-Go/docs/13-How_To_Do_Math_in_Go_with_Operators/>13. 如何用运算符在 Go 中做数学计算</a></li><li><a href=/How-To-Code-in-Go/docs/14-Understanding_Boolean_Logic_in_Go/>14. 理解 Go 中的布尔逻辑</a></li><li><a href=/How-To-Code-in-Go/docs/15-Understanding_Maps_in_Go/ class=active>15. 理解 Go 中的 Map</a></li><li><a href=/How-To-Code-in-Go/docs/16-Understanding_Arrays_and_Slices_in_Go/>16. 理解 Go 中的数组和切片</a></li><li><a href=/How-To-Code-in-Go/docs/17-Handling_Errors_in_Go_DigitalOcean/>17. 在 Go 中处理错误</a></li><li><a href=/How-To-Code-in-Go/docs/18-Creating_Custom_Errors_in_Go_DigitalOcean/>18. 在 Go 中创建自定义错误</a></li><li><a href=/How-To-Code-in-Go/docs/19-Handling_Panics_in_Go-_DigitalOcean/>19 在 Go 中处理恐慌</a></li><li><a href=/How-To-Code-in-Go/docs/20-Importing_Packages_in_Go_DigitalOcean/>20. 在 Go 中导入包</a></li><li><a href=/How-To-Code-in-Go/docs/21-How_To_Write_Packages_in_Go/>21. 如何在 Go 中编写包</a></li><li><a href=/How-To-Code-in-Go/docs/22-Understanding_Package_Visibility_in_Go/>22. 理解 Go 中包的可见性</a></li><li><a href=/How-To-Code-in-Go/docs/23-How_To_Write_Conditional_Statements_in_Go/>23. 如何在 Go 中编写条件语句</a></li><li><a href=/How-To-Code-in-Go/docs/24-How_To_Write_Switch_Statements_in_Go/>24. 如何在 Go 中编写 Switch 语句</a></li><li><a href=/How-To-Code-in-Go/docs/25-How_To_Construct_For_Loops_in_Go/>25. 如何在 Go 中构造 for 循环</a></li><li><a href=/How-To-Code-in-Go/docs/26-Using_Break_and_Continue_Statements_When_Working_with_Loops_in_Go/>26. 在循环中使用 Break 和 Continue</a></li><li><a href=/How-To-Code-in-Go/docs/27-How_To_Define_and_Call_Functions_in_Go/>27. 如何在 Go 中定义并调用函数</a></li><li><a href=/How-To-Code-in-Go/docs/28-How_To_Use_Variadic_Functions_in_Go/>28. 如何在 Go 中使用可变参数函数</a></li><li><a href=/How-To-Code-in-Go/docs/29-Understanding_defer_in_Go/>29. 理解 Go 中的 defer</a></li><li><a href=/How-To-Code-in-Go/docs/30-Understanding_init_in_Go/>30. 理解 Go 中的 init</a></li><li><a href=/How-To-Code-in-Go/docs/31-Customizing_Go_Binaries_with_Build_Tags/>31. 用构建标签定制 Go 二进制文件</a></li><li><a href=/How-To-Code-in-Go/docs/32-Understanding_Pointers_in_Go/>32. 理解 Go 中的指针</a></li><li><a href=/How-To-Code-in-Go/docs/33-Defining_Structs_in_Go/>33. 在 Go 中定义结构体</a></li><li><a href=/How-To-Code-in-Go/docs/34-Defining_Methods_in_Go/>34. 在 Go 中定义方法</a></li><li><a href=/How-To-Code-in-Go/docs/35-How_To_Build_and_Install_Go_Programs/>35. 如何构建和安装 Go 程序</a></li><li><a href=/How-To-Code-in-Go/docs/36-How_To_Use_Struct_Tags_in_Go/>36. 如何在 Go 中使用结构体标签</a></li><li><a href=/How-To-Code-in-Go/docs/37-How_To_Use_Interfaces_in_Go/>37. 如何在 Go 使用 interface</a></li><li><a href=/How-To-Code-in-Go/docs/38-Building_Go_Applications_for_Different_Operating_Systems_and_Architectures/>38. 在不同的操作系统和架构编译 Go 应用</a></li><li><a href=/How-To-Code-in-Go/docs/39-Using_ldflags_to_Set_Version_Information_for_Go_Applications/>39. 用 ldflags 设置 Go 应用程序的版本信息</a></li><li><a href=/How-To-Code-in-Go/docs/40-How_To_Use_the_Flag_Package_in_Go/>40. 在 Go 里面如何使用 Flag 包</a></li><li><a href=/How-To-Code-in-Go/docs/41-How_to_Use_Go_Modules/>41. 如何使用 Go 模块</a></li><li><a href=/How-To-Code-in-Go/docs/42-How_to_Distribute_Go_Modules/>42. 如何分发 Go 模块</a></li><li><a href=/How-To-Code-in-Go/docs/43-How_to_Use_a_Private_Go_Module_in_Your_Own_Project/>43. 如何在自己的项目中使用私有的Go模块</a></li></ul></li><li><p><strong>附录：资源</strong></p></li><li><p><a href=https://github.com/gocn/How-To-Code-in-Go><strong>Fork on Github</strong></a></p></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/How-To-Code-in-Go/svg/menu.svg class=book-icon alt=Menu></label>
<strong>15 Understanding Maps in Go</strong>
<label for=toc-control><img src=/How-To-Code-in-Go/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#获取-map-元素>获取 map 元素</a></li><li><a href=#键和值>键和值</a></li><li><a href=#检查存在性>检查存在性</a></li><li><a href=#修改-map>修改 map</a><ul><li><a href=#增加和修改-map-的元素>增加和修改 map 的元素</a></li><li><a href=#删除-map-的元素>删除 map 的元素</a></li></ul></li><li><a href=#总结>总结</a></li></ul></nav></aside></header><article class=markdown><h1 id=理解-go-中的-map>理解 Go 中的 Map
<a class=anchor href=#%e7%90%86%e8%a7%a3-go-%e4%b8%ad%e7%9a%84-map>#</a></h1><p>大多数现代编程语言都有_字典_或_哈希_类型的概念。这些类型通常用于以成对的方式存储数据，其中的<strong>key</strong>映射到<strong>value</strong>。</p><p>在 Go 中，<em>map</em> 数据类型就是大多数程序员认为的字典类型。它将键映射到值，形成键值对，是 Go 中存储数据的一种有效方式。一个 map 的构造是通过使用关键字 <code>map</code>，然后是方括号中的键数据类型 <code>[ ]</code>，接着是值数据类型。然后将键值对放在大括号的两侧 { } 中。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>map</span>[<span style=color:#a6e22e>key</span>]<span style=color:#a6e22e>value</span>{}
</span></span></code></pre></div><p>通常在 Go 中使用 map 来保存相关数据，例如 ID 中包含的信息。一个有数据的 map 看起来像这样。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;Sammy&#34;</span>, <span style=color:#e6db74>&#34;animal&#34;</span>: <span style=color:#e6db74>&#34;shark&#34;</span>, <span style=color:#e6db74>&#34;color&#34;</span>: <span style=color:#e6db74>&#34;blue&#34;</span>, <span style=color:#e6db74>&#34;location&#34;</span>: <span style=color:#e6db74>&#34;ocean&#34;</span>}
</span></span></code></pre></div><p>除了大括号外，整个 map 中还有冒号连接键值对。冒号左边的字是键。键值可以是 Go 中可比较的类型，如 <code>strings</code>、<code>ints</code> 等。</p><p>示例 map 中的键是：</p><ul><li><code>"name"</code></li><li><code>"animal"</code></li><li><code>"color"</code></li><li><code>"location"</code></li></ul><p>冒号右边的字是值，值可以是任何数据类型。示例 map 中的值是：</p><ul><li><code>"Sammy"</code></li><li><code>"shark"</code></li><li><code>"blue"</code></li><li><code>"ocean"</code></li></ul><p>像其他数据类型一样，你可以将 map 存储在一个变量内，并将其打印出来：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>sammy</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;Sammy&#34;</span>, <span style=color:#e6db74>&#34;animal&#34;</span>: <span style=color:#e6db74>&#34;shark&#34;</span>, <span style=color:#e6db74>&#34;color&#34;</span>: <span style=color:#e6db74>&#34;blue&#34;</span>, <span style=color:#e6db74>&#34;location&#34;</span>: <span style=color:#e6db74>&#34;ocean&#34;</span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>sammy</span>)
</span></span></code></pre></div><p>输出为：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>Output</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>map</span>[<span style=color:#a6e22e>animal</span>:<span style=color:#a6e22e>shark</span> <span style=color:#a6e22e>color</span>:<span style=color:#a6e22e>blue</span> <span style=color:#a6e22e>location</span>:<span style=color:#a6e22e>ocean</span> <span style=color:#a6e22e>name</span>:<span style=color:#a6e22e>Sammy</span>]
</span></span></code></pre></div><p>键值对的顺序可能发生了变化。在 Go 中，map 数据类型是无序的。无论顺序如何，键值对将保持不变，你能够根据键值关系来访问数据。</p><h2 id=获取-map-元素>获取 map 元素
<a class=anchor href=#%e8%8e%b7%e5%8f%96-map-%e5%85%83%e7%b4%a0>#</a></h2><p>你可以通过引用相关的键来获取一个 map 的值。由于 map 提供了存储数据的键值对，它们可以成为你的 Go 程序中重要而有用的东西。</p><p>如果你想获取 Sammy 的用户名，你可以通过调用 <code>sammy["name"]</code> 来实现；持有你的 map 和相关键的变量。我们把它打印出来：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>sammy</span>[<span style=color:#e6db74>&#34;name&#34;</span>])
</span></span></code></pre></div><p>输出的值如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>Output</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Sammy</span>
</span></span></code></pre></div><p>map 的行为就像一个数据库；而不是像分片那样调用一个整数来获得一个特定的索引值，你把一个值分配给一个键，然后调用这个键来获得它的相关值。</p><p>通过调用键 <code>name</code>，你会得到该键的值，也就是 <code>Sammy</code>。</p><p>类似地，你可以用同样的格式调用 <code>sammy</code> 映射中的其余值：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>sammy</span>[<span style=color:#e6db74>&#34;animal&#34;</span>])
</span></span><span style=display:flex><span><span style=color:#75715e>// returns shark
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    
</span></span><span style=display:flex><span><span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>sammy</span>[<span style=color:#e6db74>&#34;color&#34;</span>])
</span></span><span style=display:flex><span><span style=color:#75715e>// returns blue
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    
</span></span><span style=display:flex><span><span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>sammy</span>[<span style=color:#e6db74>&#34;location&#34;</span>])
</span></span><span style=display:flex><span><span style=color:#75715e>// returns ocean
</span></span></span></code></pre></div><p>通过利用 map 数据类型中的键值对，你可以引用键来查询值。</p><h2 id=键和值>键和值
<a class=anchor href=#%e9%94%ae%e5%92%8c%e5%80%bc>#</a></h2><p>与某些编程语言不同，Go 没有任何方便的函数来列出 map 的键或值。比如 Python 可以用 <code>.keys()</code> 方法来查看所有的键。然而，它允许通过使用 <code>range</code> 操作符来进行迭代查看：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>for</span> <span style=color:#a6e22e>key</span>, <span style=color:#a6e22e>value</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>sammy</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;%q is the key for the value %q\n&#34;</span>, <span style=color:#a6e22e>key</span>, <span style=color:#a6e22e>value</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>当在 Go 中对一个 map 进行 range 遍历时，它将返回两个值。第一个值是键，第二个值是值。Go 将以正确的数据类型创建这些变量。在这个例子中，map 的键是一个 <code>string</code>，所以 <code>key</code> 也将是一个字符串。<code>value</code> 也是一个字符串：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>Output</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>animal</span><span style=color:#e6db74>&#34; is the key for the value &#34;</span><span style=color:#a6e22e>shark</span><span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;</span><span style=color:#a6e22e>color</span><span style=color:#e6db74>&#34; is the key for the value &#34;</span><span style=color:#a6e22e>blue</span><span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;</span><span style=color:#a6e22e>location</span><span style=color:#e6db74>&#34; is the key for the value &#34;</span><span style=color:#a6e22e>ocean</span><span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;</span><span style=color:#a6e22e>name</span><span style=color:#e6db74>&#34; is the key for the value &#34;</span><span style=color:#a6e22e>Sammy</span><span style=color:#960050;background-color:#1e0010>&#34;</span>
</span></span></code></pre></div><p>要获得一个只有键的列表，你可以再次使用 range 操作符。你可以只声明一个变量，只访问键：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>keys</span> <span style=color:#f92672>:=</span> []<span style=color:#66d9ef>string</span>{}
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> <span style=color:#a6e22e>key</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>sammy</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>keys</span> = append(<span style=color:#a6e22e>keys</span>, <span style=color:#a6e22e>key</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;%q&#34;</span>, <span style=color:#a6e22e>keys</span>)
</span></span></code></pre></div><p>程序一开始就声明了一个切片来存储你的键。</p><p>只输出 map 的所有键：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>Output</span>
</span></span><span style=display:flex><span>[<span style=color:#e6db74>&#34;color&#34;</span> <span style=color:#e6db74>&#34;location&#34;</span> <span style=color:#e6db74>&#34;name&#34;</span> <span style=color:#e6db74>&#34;animal&#34;</span>]
</span></span></code></pre></div><p>同样，这些键没有被排序。如果你想对它们进行排序，你可以使用<a href=https://golang.org/pkg/sort><code>sort</code></a>包中的 <code>sort.Strings</code> 函数：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>sort</span>.<span style=color:#a6e22e>Strings</span>(<span style=color:#a6e22e>keys</span>)
</span></span></code></pre></div><p>使用这个函数，你会收到以下输出：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>Output</span>
</span></span><span style=display:flex><span>[<span style=color:#e6db74>&#34;animal&#34;</span> <span style=color:#e6db74>&#34;color&#34;</span> <span style=color:#e6db74>&#34;location&#34;</span> <span style=color:#e6db74>&#34;name&#34;</span>]
</span></span></code></pre></div><p>你可以使用同样的模式来检索一个 map 中的值。在下一个例子中，你预先分配了切片以避免分配，从而使程序更有效率：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>sammy</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;Sammy&#34;</span>, <span style=color:#e6db74>&#34;animal&#34;</span>: <span style=color:#e6db74>&#34;shark&#34;</span>, <span style=color:#e6db74>&#34;color&#34;</span>: <span style=color:#e6db74>&#34;blue&#34;</span>, <span style=color:#e6db74>&#34;location&#34;</span>: <span style=color:#e6db74>&#34;ocean&#34;</span>}
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#a6e22e>items</span> <span style=color:#f92672>:=</span> make([]<span style=color:#66d9ef>string</span>, len(<span style=color:#a6e22e>sammy</span>))
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>v</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>sammy</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>items</span>[<span style=color:#a6e22e>i</span>] = <span style=color:#a6e22e>v</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;%q&#34;</span>, <span style=color:#a6e22e>items</span>)
</span></span></code></pre></div><p>首先，你声明一个切片来存储键；因为你知道需要多少个元素，你可以通过定义切片的大小来避免潜在的内存分配。然后你声明索引变量。由于你不想要这个键而使用 <code>_</code> 操作符，当开始循环时，忽略这个键的值。输出将如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>Output</span>
</span></span><span style=display:flex><span>[<span style=color:#e6db74>&#34;ocean&#34;</span> <span style=color:#e6db74>&#34;Sammy&#34;</span> <span style=color:#e6db74>&#34;shark&#34;</span> <span style=color:#e6db74>&#34;blue&#34;</span>]
</span></span></code></pre></div><p>要查看一个 map 中的元素数量，可以使用内置的<code>len</code>函数：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>sammy</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;Sammy&#34;</span>, <span style=color:#e6db74>&#34;animal&#34;</span>: <span style=color:#e6db74>&#34;shark&#34;</span>, <span style=color:#e6db74>&#34;color&#34;</span>: <span style=color:#e6db74>&#34;blue&#34;</span>, <span style=color:#e6db74>&#34;location&#34;</span>: <span style=color:#e6db74>&#34;ocean&#34;</span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(len(<span style=color:#a6e22e>sammy</span>))
</span></span></code></pre></div><p>输出展示 map 中的元素数量：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>Output</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>
</span></span></code></pre></div><p>尽管 Go 没有提供获取键和值的便利函数，但在需要时只需要几行代码就可以检索到键和值。</p><h2 id=检查存在性>检查存在性
<a class=anchor href=#%e6%a3%80%e6%9f%a5%e5%ad%98%e5%9c%a8%e6%80%a7>#</a></h2><p>当请求的键不存在时，Go 中的 map 将为 map 的值类型返回零值。正因为如此，你需要用另一种方法来区分存储零值和不存在的键。</p><p>我们来查询 map 中的一个不存在的键，并看看返回的值：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>counts</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>int</span>{}
</span></span><span style=display:flex><span><span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>counts</span>[<span style=color:#e6db74>&#34;sammy&#34;</span>])
</span></span></code></pre></div><p>你会看到一下输出：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>Output</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>0</span>
</span></span></code></pre></div><p>即使键 <code>sammy</code> 不在 map 中，Go 仍然返回 <code>0</code> 。这是因为值的数据类型是 <code>int</code>，由于 Go 中所有的变量都有零值，所以它返回的是 <code>0</code> 的零值。</p><p>在很多情况下，这是不可取的，会导致你的程序出现错误。在查找 map 中的值时，Go 可以返回两个值。这第二个值是一个 <code>bool</code> 类型，如果找到了键，则为 <code>true</code> ，如果没有找到键，则为 <code>false</code>。在 Go 中，惯用变量名为 <code>ok</code>。尽管你可以把捕捉第二个参数的变量命名为任何名字，但在 Go 中，<code>ok</code> 是一种惯用方式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>count</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>counts</span>[<span style=color:#e6db74>&#34;sammy&#34;</span>]
</span></span></code></pre></div><p>如果键 <code>sammy</code> 存在于 <code>counts</code> map 中，那么 <code>ok</code> 将是 <code>true</code>。否则，<code>ok</code> 将是 <code>false</code>。</p><p>你可以使用 <code>ok</code> 变量来决定在你的程序中做什么：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>ok</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;Sammy has a count of %d\n&#34;</span>, <span style=color:#a6e22e>count</span>)
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Sammy was not found&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>输出结果如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>Output</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Sammy</span> <span style=color:#a6e22e>was</span> <span style=color:#a6e22e>not</span> <span style=color:#a6e22e>found</span>
</span></span></code></pre></div><p>在 Go 中，你可以将变量声明和条件检查与 if/else 相结合。这使得你可以使用一个单一的语句来进行这种检查：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>count</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>counts</span>[<span style=color:#e6db74>&#34;sammy&#34;</span>]; <span style=color:#a6e22e>ok</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;Sammy has a count of %d\n&#34;</span>, <span style=color:#a6e22e>count</span>)
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Sammy was not found&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>在 Go 中从 map 中查询一个值时，检查其是否存在是很好的做法，以避免程序中出现错误。</p><h2 id=修改-map>修改 map
<a class=anchor href=#%e4%bf%ae%e6%94%b9-map>#</a></h2><p>map 是一个可变的数据结构，所以你可以修改它们。让我们在本节中看看添加和删除 map 的元素。</p><h3 id=增加和修改-map-的元素>增加和修改 map 的元素
<a class=anchor href=#%e5%a2%9e%e5%8a%a0%e5%92%8c%e4%bf%ae%e6%94%b9-map-%e7%9a%84%e5%85%83%e7%b4%a0>#</a></h3><p>在不使用方法或函数的情况下，你可以向 map 添加键值对。你可以使用 map 的变量名，然后是方括号中的键值 <code>[ ]</code>，并使用 <code>=</code> 操作符来设置一个新值：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>map</span>[<span style=color:#a6e22e>key</span>] = <span style=color:#a6e22e>value</span>
</span></span></code></pre></div><p>你可以通过在一个名为 <code>usernames</code> 的 map 上添加一个键值对来看到这个行为：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>usernames</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;Sammy&#34;</span>: <span style=color:#e6db74>&#34;sammy-shark&#34;</span>, <span style=color:#e6db74>&#34;Jamie&#34;</span>: <span style=color:#e6db74>&#34;mantisshrimp54&#34;</span>}
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#a6e22e>usernames</span>[<span style=color:#e6db74>&#34;Drew&#34;</span>] = <span style=color:#e6db74>&#34;squidly&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>usernames</span>)
</span></span></code></pre></div><p>输出将展示 map 中新的 <code>Drew:squidly</code> 键值对：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>Output</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>map</span>[<span style=color:#a6e22e>Drew</span>:<span style=color:#a6e22e>squidly</span> <span style=color:#a6e22e>Jamie</span>:<span style=color:#a6e22e>mantisshrimp54</span> <span style=color:#a6e22e>Sammy</span>:<span style=color:#a6e22e>sammy</span><span style=color:#f92672>-</span><span style=color:#a6e22e>shark</span>]
</span></span></code></pre></div><p>因为 map 是无序返回的，这一对键值可以出现在 map 输出的任何地方。如果你程序后面使用 <code>usernames</code> 的 map，它将包括新加的这个键值对。</p><p>你也可以使用这个语法来修改一个键的值。在这种情况下，你引用一个现有的键，并传递一个不同的值给它。</p><p>考虑一个名为 <code>followers</code> 的 map，它记录某个网络上用户的粉丝。用户 <code>drew</code> 今天的粉丝增加了，所以你需要更新 <code>drew</code> 键的整数值。可以使用 <code>Println()</code> 函数来检查 map 是否被修改：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>followers</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>int</span>{<span style=color:#e6db74>&#34;drew&#34;</span>: <span style=color:#ae81ff>305</span>, <span style=color:#e6db74>&#34;mary&#34;</span>: <span style=color:#ae81ff>428</span>, <span style=color:#e6db74>&#34;cindy&#34;</span>: <span style=color:#ae81ff>918</span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>followers</span>[<span style=color:#e6db74>&#34;drew&#34;</span>] = <span style=color:#ae81ff>342</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>followers</span>)
</span></span></code></pre></div><p>以下输出了 <code>drew</code> 更新后的值：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>Output</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>map</span>[<span style=color:#a6e22e>cindy</span>:<span style=color:#ae81ff>918</span> <span style=color:#a6e22e>drew</span>:<span style=color:#ae81ff>342</span> <span style=color:#a6e22e>mary</span>:<span style=color:#ae81ff>428</span>]
</span></span></code></pre></div><p>你可以用这种方法将键值对添加到用户输入的 map 中。让我们写一个快速程序 <code>usernames.go</code>，它在命令行上运行，允许用户输入，以增加更多的名字和相关的用户名：</p><p>usernames.go</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;strings&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>usernames</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;Sammy&#34;</span>: <span style=color:#e6db74>&#34;sammy-shark&#34;</span>, <span style=color:#e6db74>&#34;Jamie&#34;</span>: <span style=color:#e6db74>&#34;mantisshrimp54&#34;</span>}
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Enter a name:&#34;</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>name</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Scanln</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>name</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>            panic(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>name</span> = <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>TrimSpace</span>(<span style=color:#a6e22e>name</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>u</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>usernames</span>[<span style=color:#a6e22e>name</span>]; <span style=color:#a6e22e>ok</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;%q is the username of %q\n&#34;</span>, <span style=color:#a6e22e>u</span>, <span style=color:#a6e22e>name</span>)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;I don&#39;t have %v&#39;s username, what is it?\n&#34;</span>, <span style=color:#a6e22e>name</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>username</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>err</span> = <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Scanln</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>username</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>            panic(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>username</span> = <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>TrimSpace</span>(<span style=color:#a6e22e>username</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>usernames</span>[<span style=color:#a6e22e>name</span>] = <span style=color:#a6e22e>username</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Data updated.&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>在 <code>usernames.go</code> 中，你首先定义 map。然后设置了一个循环来迭代名字。你要求用户输入一个名字，并声明一个变量来存储它。接下来检查是否有错误；如果有，程序将以 <em>panic</em> 退出。因为 <code>Scanln</code> 捕获了整个输入，包括回车，你需要从输入中删除空格；你可以用 <code>strings.TrimSpace</code> 函数来做这个。</p><p><code>if</code> 代码块检查名字是否存在于 map 中并打印反馈。如果名字是存在的，则继续回到循环的顶部。如果名字不在 map 中，它会向用户提供反馈，然后会要求提供一个新的用户名。程序再次检查，看是否有错误。如果没有错误，它就去掉回车键，将用户名的值分配给名字键，然后打印出数据被更新的反馈。</p><p>让我们在命令行上运行该程序：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>go</span> <span style=color:#a6e22e>run</span> <span style=color:#a6e22e>usernames</span>.<span style=color:#66d9ef>go</span>
</span></span></code></pre></div><p>你将看到如下输出：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>Output</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Enter</span> <span style=color:#a6e22e>a</span> <span style=color:#a6e22e>name</span>:
</span></span><span style=display:flex><span><span style=color:#a6e22e>Sammy</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;sammy-shark&#34;</span> <span style=color:#a6e22e>is</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>username</span> <span style=color:#a6e22e>of</span> <span style=color:#e6db74>&#34;Sammy&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Enter</span> <span style=color:#a6e22e>a</span> <span style=color:#a6e22e>name</span>:
</span></span><span style=display:flex><span><span style=color:#a6e22e>Jesse</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>I</span> <span style=color:#a6e22e>don</span><span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#a6e22e>t</span> <span style=color:#a6e22e>have</span> <span style=color:#a6e22e>Jesse</span><span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#a6e22e>s</span> <span style=color:#a6e22e>username</span>, <span style=color:#a6e22e>what</span> <span style=color:#a6e22e>is</span> <span style=color:#a6e22e>it</span><span style=color:#960050;background-color:#1e0010>?</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>JOctopus</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Data</span> <span style=color:#a6e22e>updated</span>.
</span></span><span style=display:flex><span><span style=color:#a6e22e>Enter</span> <span style=color:#a6e22e>a</span> <span style=color:#a6e22e>name</span>:
</span></span></code></pre></div><p>完成测试后，可以通过 <code>CTRL + C</code> 键退出程序。</p><p>这展示了你如何以交互方式修改 map。对于这个特殊的程序，只要你用 <code>CTRL + C</code> 退出程序，你就会丢失所有的数据，除非你实现了处理读写文件的方法。</p><p>总结一下，你可以用 <code>map[key] = value</code> 语法向 map 添加元素或修改值。</p><h3 id=删除-map-的元素>删除 map 的元素
<a class=anchor href=#%e5%88%a0%e9%99%a4-map-%e7%9a%84%e5%85%83%e7%b4%a0>#</a></h3><p>正如你可以在 map 数据类型中添加键值对和改变数值一样，你也可以在 map 中删除元素。</p><p>要从一个 map 中删除一个键值对，你可以使用内置函数 <code>delete()</code>。第一个参数是你想要删除的 map。第二个参数是你要删除的键：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>delete(<span style=color:#66d9ef>map</span>, <span style=color:#a6e22e>key</span>)
</span></span></code></pre></div><p>我们定义一个名为 <code>permission</code> 的 map：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>permissions</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>int</span>]<span style=color:#66d9ef>string</span>{<span style=color:#ae81ff>1</span>: <span style=color:#e6db74>&#34;read&#34;</span>, <span style=color:#ae81ff>2</span>: <span style=color:#e6db74>&#34;write&#34;</span>, <span style=color:#ae81ff>4</span>: <span style=color:#e6db74>&#34;delete&#34;</span>, <span style=color:#ae81ff>8</span>: <span style=color:#e6db74>&#34;create&#34;</span>, <span style=color:#ae81ff>16</span>:<span style=color:#e6db74>&#34;modify&#34;</span>}
</span></span></code></pre></div><p>你不再需要 <code>modify</code> 变量，所以你要把它从 map 上删除。然后，你要打印出 map，以确认它被删除。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>permissions</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>int</span>]<span style=color:#66d9ef>string</span>{<span style=color:#ae81ff>1</span>: <span style=color:#e6db74>&#34;read&#34;</span>, <span style=color:#ae81ff>2</span>: <span style=color:#e6db74>&#34;write&#34;</span>, <span style=color:#ae81ff>4</span>: <span style=color:#e6db74>&#34;delete&#34;</span>, <span style=color:#ae81ff>8</span>: <span style=color:#e6db74>&#34;create&#34;</span>, <span style=color:#ae81ff>16</span>: <span style=color:#e6db74>&#34;modify&#34;</span>}
</span></span><span style=display:flex><span>delete(<span style=color:#a6e22e>permissions</span>, <span style=color:#ae81ff>16</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>permissions</span>)
</span></span></code></pre></div><p>输出如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>Output</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>map</span>[<span style=color:#ae81ff>1</span>:<span style=color:#a6e22e>read</span> <span style=color:#ae81ff>2</span>:<span style=color:#a6e22e>write</span> <span style=color:#ae81ff>4</span>:<span style=color:#a6e22e>delete</span> <span style=color:#ae81ff>8</span>:<span style=color:#a6e22e>create</span>]
</span></span></code></pre></div><p>这一行 <code>delete(permissions, 16)</code> 从 <code>permissions</code> map 中移除键值对 <code>16: "modify"</code>。</p><p>如果你想清除一个 map 的所有值，你可以通过把它设置为一个相同类型的空 map 来实现。这将创建一个新的空 map 来使旧的 map 被垃圾收集器清除。</p><p>让我们删除 <code>permissions</code> map 中的所有元素：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>permissions</span> = <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>int</span>]<span style=color:#66d9ef>string</span>{}
</span></span><span style=display:flex><span><span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>permissions</span>)
</span></span></code></pre></div><p>输出展示 map 为空：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>Output</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>map</span>[]
</span></span></code></pre></div><p>因为 map 是可变的数据类型，它们可以被添加、修改、删除和清除元素。</p><h2 id=总结>总结
<a class=anchor href=#%e6%80%bb%e7%bb%93>#</a></h2><p>本教程探讨了 Go 中的 map 数据结构。map 是由键值对组成的，提供了一种不依赖索引的数据存储方式。这使得我们可以根据其含义和与其他数据类型的关系来检索数值。</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#获取-map-元素>获取 map 元素</a></li><li><a href=#键和值>键和值</a></li><li><a href=#检查存在性>检查存在性</a></li><li><a href=#修改-map>修改 map</a><ul><li><a href=#增加和修改-map-的元素>增加和修改 map 的元素</a></li><li><a href=#删除-map-的元素>删除 map 的元素</a></li></ul></li><li><a href=#总结>总结</a></li></ul></nav></div></aside></main></body></html>